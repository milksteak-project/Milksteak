#!/bin/bash

# Milksteak Installer

echo "═══════════════════════════════════════════════════════════════════════════"

while true
do
  read -r -p "Would you like to install the Milksteak Package Manager? (y/n) " choice
    case "$choice" in
      n|N)  exit 0;;
      y|Y)  echo
            sleep 2
            break;;
    *) echo 'Response not valid';;
  esac
done

echo ">>>>> Installing Milksteak..."

{
git clone https://github.com/milksteak-project/Milksteak.git $HOME/usr
ln -s $HOME/usr/libexec/steak $HOME/usr/bin/steak
} &> /dev/null

mkdir $HOME/usr/share/bpm
mv $HOME/usr/LICENSE $HOME/usr/share/bpm/LICENSE

mkdir $HOME/usr/share/milksteak
mv $HOME/usr/README.md $HOME/usr/share/milksteak/README.md

chflags hidden $HOME/usr

echo "
export PATH=$HOME/usr/bin:$HOME/usr/sbin:$PATH" >> $HOME/.bash_profile

sleep 2

echo "Done!"
echo "Type 'steak help' for more info."
echo "═══════════════════════════════════════════════════════════════════════════"
