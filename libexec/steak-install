#!/usr/bin/env bash
# Usage: steak install <package-name>
# Summary: Install/update a package

set -e

name=$1

pkgdir=$HOME/usr/etc/packages/$name
pkg=$HOME/usr/etc/packages/$name/$name.sh

if [ -d $pkgdir ]; then
	rm -rf $pkgdir
	mkdir -p $HOME/usr/etc/packages/$name
else
	mkdir -p $HOME/usr/etc/packages/$name
fi

printf '\e[1m%*s\n\e[m' "${COLUMNS:-$(tput cols)}" '' | tr ' ' =
echo -e ">>>>> $name will be installed to $HOME/usr"
wget -O $pkg https://raw.githubusercontent.com/milksteak-project/steaks/master/packages/$name/$name.sh -q
source $pkgdir/$name.sh
