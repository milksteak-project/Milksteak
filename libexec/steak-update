#!/bin/bash
# Usage: steak update [package name]
# Summary: Update one or all steak packages
set -e

name=$1

function update {

  name=$1
  pkg=$HOME/usr/etc/packages/$name

  mkdir -p $HOME/usr/packages
  rm -rf $pkg

  echo "═══════════════════════════════════════════════════════════════════════════"
  echo ">>>>>>>> Updating package: $name ..."
  wget -O $pkg https://github.com/sigma-1/steaks/blob/master/packages/$name/$name.sh

  cd $pkg
  /bin/bash $name.sh
}

if [ $name ]
then
  update $name
else
  for pkg in $HOME/usr/etc/packages/*
  do
    name=`basename $pkg`
    update $name
  done
fi
